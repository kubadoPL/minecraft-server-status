<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Server Status</title>
  <link href="../dist/output.css" rel="stylesheet">
  <style>
    .color-black { color: #000000; }
.color-dark_blue { color: #0000AA; }
.color-dark_green { color: #00AA00; }
.color-dark_aqua { color: #00AAAA; }
.color-dark_red { color: #AA0000; }
.color-dark_purple { color: #AA00AA; }
.color-gold { color: #FFAA00; }
.color-gray { color: #AAAAAA; }
.color-dark_gray { color: #555555; }
.color-blue { color: #5555FF; }
.color-green { color: #55FF55; }
.color-aqua { color: #55FFFF; }
.color-red { color: #FF5555; }
.color-light_purple { color: #FF55FF; }
.color-yellow { color: #FFFF55; }
.color-white { color: #FFFFFF; }
.bold { font-weight: bold; }
.italic { font-style: italic; }
.underline { text-decoration: underline; }
.strikethrough { text-decoration: line-through; }

body.main {
  display: flex;
  height: 100vh;
  align-items: center;
  justify-content: center;
  background-image: url('../dist/img/main.png');
  background-size: cover;
  background-repeat: no-repeat;
}

.center-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 0.5rem;
  background-color: rgba(0, 0, 0, 0.4);
  padding: 6rem;
  color: rgba(255, 255, 255, 1);
  backdrop-filter: blur(4px);
}

@media (max-width: 768px) {
  .center-container {
    padding: 4rem;
  }
}

@media (max-width: 640px) {
  .center-container {
    padding: 2rem;
    max-width: 70%;
  }
  .advertisemnt-container a {
    display: none;
  }
}

@media (max-width: 480px) {
  .center-container {
    padding: 1rem;
  }
  .advertisemnt-container {
    display: none;
  }
}

.center-container > :not([hidden]) ~ :not([hidden]) {
  --tw-space-x-reverse: 0;
  margin-right: calc(2.5rem * var(--tw-space-x-reverse));
  margin-left: calc(2.5rem * calc(1 - var(--tw-space-x-reverse)));
}

.mb-5 {
  margin-bottom: 1.25rem;
}

.mb-3 {
  margin-bottom: 0.75rem;
}

.flex {
  display: flex;
}

.h-36 {
  height: 9rem;
}

.w-36 {
  width: 9rem;
}

.flex-col {
  flex-direction: column;
}

.text-7xl {
  font-size: 4.5rem;
  line-height: 1;
}

.text-lg {
  font-size: 1.125rem;
  line-height: 1.75rem;
}

.text-3xl {
  font-size: 1.875rem;
  line-height: 2.25rem;
}

.font-medium {
  font-weight: 500;
}

.font-semibold {
  font-weight: 600;
}

.text-gray-300 {
  --tw-text-opacity: 1;
  color: rgb(209 213 219 / var(--tw-text-opacity));
}

#player-count {
  color: rgb(26, 255, 0);
}

#player-countmax {
  color: red;
}

.button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 10px 12px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 1rem;
  margin: 4px 2px;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.3s ease;
}

.button:hover {
  background-color: #45a049;
}

.footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  text-align: center;
  padding: 1rem 0;
  background-color: #333;
  color: #AAAAAA;
  font-size: 0.875rem;
}

/* New styles for semi-transparent background */
.advertisemnt-container {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0); /* Semi-transparent black background */
  max-width: 100%;
  max-height: 100%;
  position: relative;
  padding: 20px; /* Adjust padding as needed */
}

.advertisemnt {
  max-width: 309px;
  max-height: 309px;
  width: 80%;
  height: auto;
}

.advertisemnt img {
  max-width: 100%;
  height: auto;
  display: block;
}

@media (orientation: portrait) {
  body.main {
    flex-direction: column;
    justify-content: flex-start;
    padding-top: 2rem;
  }
  .center-container {
    width: 100%;
    max-width: 90%;
    padding: 1rem;
  }
}

@media (max-width: 1024px) {
  .text-7xl {
    font-size: 3.5rem;
  }
  .text-3xl {
    font-size: 1.5rem;
  }
  .button {
    font-size: 0.875rem;
    padding: 8px 10px;
  }
}

@media (max-width: 768px) {
  .text-7xl {
    font-size: 3rem;
  }
  .text-3xl {
    font-size: 1.25rem;
  }
  .button {
    font-size: 0.75rem;
    padding: 6px 8px;
  }
}

@media (max-width: 480px) {
  .text-7xl {
    font-size: 2.5rem;
  }
  .text-3xl {
    font-size: 1rem;
  }
  .button {
    font-size: 0.625rem;
    padding: 4px 6px;
  }
}

    
  </style>
</head>
<body class="main">
  <div class="center-container">
    <img src="../dist/img/block.png" class="h-36 w-36" id="server-icon"/>
    <div class="flex flex-col">
      <h1 class="text-7xl font-medium text-white-800 mb-5" id="server-ip">Server Offline!</h1>
      <span class="text-gray-300 text-lg mb-3 server-online" id="motd">Server Offline!</span>
      <div class="text-3xl"><span class="font-semibold server-status" id="player-count">0</span>/<span id="player-countmax">0</span><span id="online-message"> Players Online</span></div>
      <span class="text-gray-300 text-lg mb-3 server-online" id="serversion"></span>
      <a href="https://modpack-link.com" class="button" id="modpack-link" target="_blank">Download Modpack</a>
    </div>
  </div>
    <!-- Advertisement container -->
  <div class="advertisemnt-container">
   a
    <a href="https://radio-gaming.stream/" target="_blank" class="advertisemnt">
      <img src="../dist/img/Radio Gaming ad.png" />
    </a>
  </div>
  <div class="footer">
    © 2024 K5 Studio
  </div>
  <script>
    function initServerData(serverIp, serverPort) {
      const serverIpElement = document.getElementById('server-ip');
      serverIpElement.innerHTML = serverIp;

      fetch('https://mcapi.us/server/status?ip=' + serverIp + '&port=' + serverPort)
        .then(response => response.json())
        .then(data => handleServerStatus(data));

      function handleServerStatus(data) {
        if (data.status == 'error') {
          console.log(data.error);
          serverIpElement.innerHTML = "Server Offline";
          document.getElementById("motd").innerHTML = "Try Refreshing the page!";
          document.getElementById("player-count").innerHTML = "";
          document.getElementById("online-message").innerHTML = "";
          document.getElementById("server-icon").src = "../dist/img/block.png";
          return;
        }
        serverIpElement.innerHTML = "Kalafiorowy Gaming na Ranczu";
        document.getElementById("motd").innerHTML = parseMinecraftFormatting(data.motd);
        document.getElementById("player-count").innerHTML = data.players.now;
        document.getElementById("player-countmax").innerHTML = data.players.max;
        document.getElementById("server-icon").src = data.favicon;
        document.getElementById("serversion").innerHTML = "Server Version: " + data.server.name;
      }

      function parseMinecraftFormatting(text) {
        const colorCodes = {
          '0': 'color-black',
          '1': 'color-dark_blue',
          '2': 'color-dark_green',
          '3': 'color-dark_aqua',
          '4': 'color-dark_red',
          '5': 'color-dark_purple',
          '6': 'color-gold',
          '7': 'color-gray',
          '8': 'color-dark_gray',
          '9': 'color-blue',
          'a': 'color-green',
          'b': 'color-aqua',
          'c': 'color-red',
          'd': 'color-light_purple',
          'e': 'color-yellow',
          'f': 'color-white',
          'l': 'bold',
          'o': 'italic',
          'n': 'underline',
          'm': 'strikethrough'
        };

        let formattedText = '';
        let segments = text.split(/(§[0-9a-fk-or])/);

        segments.forEach(segment => {
          if (segment.startsWith('§')) {
            let code = segment[1];
            if (colorCodes[code]) {
              formattedText += `<span class="${colorCodes[code]}">`;
            } else if (code === 'r') {
              formattedText += '</span>'.repeat((formattedText.match(/<span/g) || []).length);
            }
          } else {
            formattedText += segment;
          }
        });

        formattedText += '</span>'.repeat((formattedText.match(/<span/g) || []).length);
        return formattedText;
      }
    }

    initServerData("149.50.108.48", "52005");
  </script>
</body>
</html>
